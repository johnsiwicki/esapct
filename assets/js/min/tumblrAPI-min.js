!function($){function t(t,e,s){var a=this;a.settings=$.extend({},$.fn.embedTumblr.defaults,s);var n=function(t){function e(){var t=a.getHours();if(t>12)var e=t-12,s="PM";else var e=t,s="AM";return{hour:e,period:s}}function s(){var t=a.getMinutes();if(10>t)var e="0"+t;else var e=t;return e}var a=new Date(1e3*t),i=a.getMonth()+1,n=a.getDay(),o=e(),r=s(),p=a.getFullYear(),l;return l=i+"/"+n+"&nbsp;"+p+"&nbsp;"+o.hour+":"+r+o.period},o=function(t,e){var s=$("<div />");$.each(e.response.posts,function(){var t=this.type,e=$("<div class='post col-md-6'/>"),a=n(this.timestamp),o=this.post_url;switch(video_url=this.video_url,t){case"audio":var r="AUDIO: "+this.artist+" - "+this.track_name,p=this.album_art?'<img src="'+this.album_art+'"/>':" ";e.addClass("audio-post").append("<h2>"+r+"</h2>",'<p class="post-date">'+a+"</p>",p,this.player,this.caption,'<a href="'+o+'">Full Post...</a>'),s.append(e);break;case"text":e.addClass("text-post").append("<h2>"+this.title+"</h2>",'<p class="post-date">'+a+"</p>",this.body,'<a href="'+o+'">Full Post...</a>'),s.append(e);break;case"photo":var l=this.photos,d=$('<div class="tumblr-photos col-md-6" />');for(i=0;i<l.length;i++){var c=$("<figure />");if(l[i].alt_sizes[0].width>=500){for(var u=0;u<l[i].alt_sizes.length;u++)if(500===l[i].alt_sizes[u].width)var h=l[i].alt_sizes[u].url}else var h=l[i].original_size.url;if(l.length>1&&d.addClass("multi-photo"),""!=l[i].caption){var f=$("<figcaption />");f.append(l[i].caption)}else var f="";c.append('<a href="'+l[i].original_size.url+'" target="_blank" title="'+l[i].caption+'"><img src="'+h+'"/></a>',f),d.append(c)}e.addClass("photo-post").append('<p class="post-date">'+a+"</p>",d,this.caption,'<a href="'+o+'">Full Post...</a>'),s.append(e);break;case"quote":e.addClass("quote-post col-md-6").append('<p class="post-date">'+a+"</p>",'<q class="quote-text">'+this.text+"</q>",'<p class="quote-author"> &#8212; '+this.source+"</p>",'<a href="'+o+'">Full Post.</a>'),s.append(e);break;case"video":e.addClass("video-post col-md-6").append('<p class="post-date">'+a+"</p>",'<video src="'+video_url+'" controls></video>',this.caption,'<p><a href="'+o+'">Full Post...</a></p>'),s.append(e);break;case"link":var g;g=this.description?this.description:"",e.addClass("link-post").append('<p class="post-date">'+a+"</p>",'<a href="'+this.url+'">'+this.title+"</a>",g,'<a href="'+o+'">Go to tumblr post...</a>'),s.append(e);break;case"chat":for(e.addClass("chat-post").append('<p class="post-date">'+a+"</p>"),i=0;i<this.dialogue.length;i++)e.append('<span class="chat-post-name">'+this.dialogue[i].name+"</span>",'<p class="chat-post-phrase">'+this.dialogue[i].phrase+"</p>");e.append('<a href="'+o+'">Go to tumblr post...</a>'),s.append(e)}}),t.append(s)},r=function(t,e,s,i,n){if(a.settings.pagination===!0){var o=$("<div class='blog-pagination clearfix'></div>");if(Math.ceil(s.response.total_posts/i)!==n){var r=$("<div class='blog-btn next'>"+a.settings.nextBtn+"</div>").css({cursor:"pointer"});o.append(r)}if(1!==n){var l=$("<div class='blog-btn prev'>"+a.settings.previousBtn+"</div>").css({cursor:"pointer"});o.append(l)}t.append(o),p(t,e)}},p=function(t,e){$(".blog-btn").on("click.embedTumblr",function(){$(this).hasClass("next")&&a.settings.currentPage++,$(this).hasClass("prev")&&a.settings.currentPage--,t.data("embedTumblr").getPosts(t,e)})};a.getPosts=function(t,e){var s=a.settings.postsPerPage,i=a.settings.currentPage;$.ajax({url:e+"&limit="+s+"&offset="+(i-1)*s,dataType:"jsonp",jsonp:"&jsonp",beforeSend:function(){t.html(a.settings.loading)},success:function(a){t.html(""),o(t,a),r(t,e,a,s,i)},error:function(){t.append(a.settings.error)}})},a.init=function(){a.getPosts(t,e)},a.destroy=function(e){e===!0&&t.html(""),$(".blog-btn").off(".embedTumblr"),t.removeData("embedTumblr")}}$.fn.embedTumblr=function(e,s){return this.each(function(){var a=$(this);if(!a.data("embedTumblr")){var i=new t(a,e,s);a.data("embedTumblr",i),i.init()}})},$.fn.embedTumblr.defaults={postsPerPage:2,pagination:!0,currentPage:1,loading:"<p>Loading...</p>",previousBtn:"&laquo; Prev",nextBtn:"Read More &raquo;",error:"<h2>Error!</h2><p>There was an error accessing the Tumblr API</p>"}}(jQuery);